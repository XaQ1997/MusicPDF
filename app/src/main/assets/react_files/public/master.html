<!-- master.html -->
<!DOCTYPE html>
<html lang="pl">
    <head>
        <script src="https://unpkg.com/react/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/prop-types/prop-types.js"></script>
        <script src="https://unpkg.com/babel-standalone/babel.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <h1>Lista Utworów</h1>
        <div id="songList"></div>

        <script type="text/babel">
          class SongList extends React.Component {
            constructor(props) {
              super(props);
              this.state = {
                songs: [],
              };
            }

            componentDidMount() {
              axios.get('/api/files')
                .then(response => {
                  const uniqueNames = getNames(response.data); // Użyj funkcji getNames
                  this.setState({ songs: uniqueNames });
                })
                .catch(error => {
                  console.error('Błąd pobierania danych:', error);
                });
            }

            render() {
              return (
                <ul>
                  {this.state.songs.map((song, index) => (
                    <li key={index}>{song}</li>
                  ))}
                </ul>
              );
            }
          }

          // Funkcja do uzyskiwania unikalnych nazw utworów
          function getNames(songs) {
            const uniqueNames = new Set();

            songs.forEach(song => {
              const parts = song.name.split('-');
              const firstPart = parts[0];
              uniqueNames.add(firstPart);
            });

            return Array.from(uniqueNames);
          }

          ReactDOM.render(<SongList />, document.getElementById('songList'));
        </script>
    </body>
</html>